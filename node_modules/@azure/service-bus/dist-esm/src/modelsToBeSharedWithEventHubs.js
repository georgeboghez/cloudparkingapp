// Copyright (c) Microsoft Corporation.
// Licensed under the MIT license.
import { __awaiter } from "tslib";
// TODO: this code is a straight-copy from EventHubs. Need to merge.
import { SpanStatusCode } from "@azure/core-tracing";
/**
 * Runs the `fn` passed in and marks the span as completed with an error (and the
 * corresponding message) or as OK.
 *
 * @hidden
 * @internal
 */
export function trace(fn, span) {
    return __awaiter(this, void 0, void 0, function* () {
        try {
            const ret = yield fn();
            span.setStatus({ code: SpanStatusCode.OK });
            return ret;
        }
        catch (err) {
            span.setStatus({
                code: SpanStatusCode.ERROR,
                message: err.message
            });
            throw err;
        }
        finally {
            span.end();
        }
    });
}
//# sourceMappingURL=modelsToBeSharedWithEventHubs.js.map